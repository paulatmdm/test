{"version":3,"file":"format-number.js","sources":["format-number.js"],"sourcesContent":["import { localeInfo } from '../cldr';\nimport { CURRENCY, ACCOUNTING, DECIMAL, PERCENT, SCIENTIFIC, DEFAULT_LOCALE, NUMBER_PLACEHOLDER, EMPTY } from '../common/constants';\nimport isString from '../common/is-string';\nimport standardNumberFormat from './standard-number-format';\nimport customNumberFormat from './custom-number-format';\n\nconst standardFormatRegExp = /^(n|c|p|e|a)(\\d*)$/i;\n\nfunction standardFormatOptions(format) {\n    const formatAndPrecision = standardFormatRegExp.exec(format);\n\n    if (formatAndPrecision) {\n        const options = {\n            style: DECIMAL\n        };\n\n        let style = formatAndPrecision[1].toLowerCase();\n\n        if (style === \"c\") {\n            options.style = CURRENCY;\n        } else if (style === \"a\") {\n            options.style = ACCOUNTING;\n        } else if (style === \"p\") {\n            options.style = PERCENT;\n        } else if (style === \"e\") {\n            options.style = SCIENTIFIC;\n        }\n\n        if (formatAndPrecision[2]) {\n            options.minimumFractionDigits = options.maximumFractionDigits = parseInt(formatAndPrecision[2], 10);\n        }\n\n        return options;\n    }\n}\n\nfunction getFormatOptions(format) {\n    let formatOptions;\n    if (isString(format)) {\n        formatOptions = standardFormatOptions(format);\n    } else {\n        formatOptions = format;\n    }\n\n    return formatOptions;\n}\n\nexport default function formatNumber(number, format = NUMBER_PLACEHOLDER, locale = DEFAULT_LOCALE) {\n    if (number === undefined || number === null) {\n        return EMPTY;\n    }\n\n    if (!isFinite(number)) {\n        return number;\n    }\n\n    const info = localeInfo(locale);\n    const formatOptions = getFormatOptions(format);\n\n    let result;\n    if (formatOptions) {\n        const style = (formatOptions || {}).style || DECIMAL;\n        result = standardNumberFormat(number, Object.assign({}, info.numbers[style], formatOptions), info);\n    } else {\n        result = customNumberFormat(number, format, info);\n    }\n\n    return result;\n}\n"],"names":["const","let"],"mappings":"AAAA,SAAS,UAAU,QAAQ,SAAS,CAAC;AACrC,SAAS,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,cAAc,EAAE,kBAAkB,EAAE,KAAK,QAAQ,qBAAqB,CAAC;AACpI,OAAO,QAAQ,MAAM,qBAAqB,CAAC;AAC3C,OAAO,oBAAoB,MAAM,0BAA0B,CAAC;AAC5D,OAAO,kBAAkB,MAAM,wBAAwB,CAAC;;AAExDA,GAAK,CAAC,oBAAoB,GAAG,qBAAqB,CAAC;;AAEnD,SAAS,qBAAqB,CAAC,MAAM,EAAE;IACnCA,GAAK,CAAC,kBAAkB,GAAG,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;IAE7D,IAAI,kBAAkB,EAAE;QACpBA,GAAK,CAAC,OAAO,GAAG;YACZ,KAAK,EAAE,OAAO;SACjB,CAAC;;QAEFC,GAAG,CAAC,KAAK,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;;QAEhD,IAAI,KAAK,KAAK,GAAG,EAAE;YACf,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC;SAC5B,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;YACtB,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC;SAC9B,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;YACtB,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC;SAC3B,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;YACtB,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC;SAC9B;;QAED,IAAI,kBAAkB,CAAC,CAAC,CAAC,EAAE;YACvB,OAAO,CAAC,qBAAqB,GAAG,OAAO,CAAC,qBAAqB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SACvG;;QAED,OAAO,OAAO,CAAC;KAClB;CACJ;;AAED,SAAS,gBAAgB,CAAC,MAAM,EAAE;IAC9BA,GAAG,CAAC,aAAa,CAAC;IAClB,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE;QAClB,aAAa,GAAG,qBAAqB,CAAC,MAAM,CAAC,CAAC;KACjD,MAAM;QACH,aAAa,GAAG,MAAM,CAAC;KAC1B;;IAED,OAAO,aAAa,CAAC;CACxB;;AAED,eAAe,SAAS,YAAY,CAAC,MAAM,EAAE,MAA2B,EAAE,MAAuB,EAAE,CAAhD;mCAAA,GAAG,kBAAkB,CAAQ;mCAAA,GAAG,cAAc;AAAG;IAChG,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;QACzC,OAAO,KAAK,CAAC;KAChB;;IAED,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QACnB,OAAO,MAAM,CAAC;KACjB;;IAEDD,GAAK,CAAC,IAAI,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;IAChCA,GAAK,CAAC,aAAa,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;;IAE/CC,GAAG,CAAC,MAAM,CAAC;IACX,IAAI,aAAa,EAAE;QACfD,GAAK,CAAC,KAAK,GAAG,CAAC,aAAa,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,OAAO,CAAC;QACrD,MAAM,GAAG,oBAAoB,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,aAAa,CAAC,EAAE,IAAI,CAAC,CAAC;KACtG,MAAM;QACH,MAAM,GAAG,kBAAkB,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;KACrD;;IAED,OAAO,MAAM,CAAC;CACjB;"}